<h1>Manager Details</h1>
<p>This website is used to display the details of the person based on their name and identifcation number</p>

    <head>
      <link rel="stylesheet" href="/assets/semantic/semantic.min.css"/>
		<script src="/assets/semantic/semantic.min.js"></script>
      <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
        crossorigin="anonymous"></script>

        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">
            var salaryArray = [['Person', 'Salary']];
            var hoursArray = [['Person', 'Hours']];
                {{#each searchDetail.employees}}
                salaryArray.push(["{{username}}", {{total_salary}}]);
                {{/each}}

            google.charts.load('current', {'packages':['corechart']});

            // Set a callback to run when the Google Visualization API is loaded.
            google.charts.setOnLoadCallback(drawChart);

            // Callback that creates and populates a data table,
            // instantiates the pie chart, passes in the data and
            // draws it.

            function drawChart() {

                // Create the data table.
                var data = google.visualization.arrayToDataTable(salaryArray);
                // Set chart options

                // Instantiate and draw our chart, passing in some options.
                var chart = new google.visualization.PieChart(document.getElementById('pieChart'));
                chart.draw(data, null);
            }
</script>
            <link rel="stylesheet" type="text/css" href="/css/manager.css">
        <style>
            #overflowTest {
                max-height: 100px;
                overflow: scroll;
                padding-top: 1%;
            }
        </style>
    </head>

    <body>
    <main>  

    <h2><a href="/manager/">Want to search again?</a></h2>
    <div class="ui labeled button" tabindex="0">
    <div class="ui blue button">
    <i class="heart icon"></i> Total Employees
  </div>
  <a class="ui basic red left pointing label">
    {{searchDetail.employees.length}}
  </a>
  </div>
      <ul>


        <li>Username: <span id="usernamedetail">{{searchDetail.user_login_id}}</span></li>
        <li>FirstName: {{searchDetail.firstName}}</li>
        <li>LastName: {{searchDetail.lastName}}</li>
        <li>Email: {{searchDetail.email}}</li>
        <li>Total Budget: {{searchDetail.budget}}</li>
        <li>Total Employees: {{searchDetail.employees.length}}</li>
        <li>Employees:

            <div id="overflowTest">
                {{#each searchDetail.employees}}
                    <ul>
                        <li>
                            <form id="manager_details" action="/manager/manager_details" name="manager_details"
                                  method='POST'>

                                <a href="/employee/empprof/{{username}}"
                                   id="{{username}}">{{username}} {{total_salary}} {{paidFlag}}
                        </li>
                        </a>
                        <button type="submit" id={{username}} class="button">Pay</button>
                        <input id="{{username}}" name="payinput" value="{{username}}" type="text"
                               style="width:50px; font-size: xx-small; visibility:hidden">
                        </form>

                        </li>
                    </ul>

                {{/each}}

        </li>
    </ul>
    </div>
    <input type="button" value="Last 10 Transaction" id="button">
    <input type="button" value="Log out" id="button" onclick="location.href = '/logout'">
    </div>
    <ul id="demo">

    </ul>
    <input type="button" value="Pending Tasks" id="pending"
           onclick="location.href='/manager/pending/{{searchDetail.user_login_id}}'">
    <input type="button" value="Tickets" id="tickets" onclick="showTickets()">

    <p id="{{username}}">Update Details</p>
    <script src="/transaction_man.js"></script>
    <script src="/manager.js"></script>
    <ol id="ticketList">
        {{#if tickets}}
            {{#each tickets}}
                <li>Employee: {{this.employeeID}}, Issue: {{this.issue}}</li>
                <button id="{{this._id}}" onclick='resolveHelp("{{{this._id}}}")'>Resolve</button>
            {{/each}}
        {{else}}
            No tickets to show.
        {{/if}}

    </ol>
    <div id="pieChart"/>



</main>
<script src="/employee.js"></script>
  
</body>

